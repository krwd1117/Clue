# CLUE (클루) - 제품 요구사항 정의서 (PRD)

* **문서 버전**: 1.2
* **작성일**: 2025년 6월 30일
* **작성자**: Gemini (AI Assistant)
* **프로젝트 오너**: (사용자 이름)

---

## 1. 개요 (Overview)

'CLUE (클루)'는 소설가, 시나리오 작가, 게임 기획자 등 창작자를 위한 모바일 애플리케이션이다. 사용자는 AI 챗봇과의 대화를 통해 캐릭터의 기본 정보, 성격, 배경 이야기 등에 대한 질문에 답하고, 이 정보를 바탕으로 ChatGPT AI가 입체적이고 상세한 캐릭터 프로필을 생성해준다. 본 프로젝트는 Flutter와 Riverpod을 사용하여 반응형 UI와 효율적인 상태 관리를 구현하며, 백엔드는 Supabase의 인증, 데이터베이스, Edge Function을 활용하여 안전하고 확장 가능한 올인원(All-in-one) 솔루션으로 구축한다.

---

## 2. 문제 정의 (Problem Statement)

창작자들은 캐릭터 구상 단계에서 다음과 같은 어려움을 겪는다.

* **영감의 부재**: 막상 캐릭터를 만들려고 하면 어디서부터 시작해야 할지 막막함을 느낀다.
* **단편적인 설정**: 캐릭터의 성격이나 특징이 평면적이거나 일관성이 부족하게 만들어지기 쉽다.
* **체계성 부족**: 떠오르는 아이디어를 메모 앱이나 노트에 흩어져 기록하여 관리하기 어렵고, 나중에 찾아보기 힘들다.
* **시간 소모**: 깊이 있는 캐릭터 하나를 설정하는 데 많은 시간과 정신적 에너지가 소모된다.

본 앱은 이러한 문제들을 대화형 AI라는 재미있고 구조화된 방식으로 해결하여, 창작자가 더 쉽고 빠르게 매력적인 캐릭터를 만들 수 있도록 돕는 것을 목표로 한다.

---

## 3. 목표 사용자 (Target Audience)

* **핵심 사용자**: 소설가, 웹소설 작가, 시나리오 작가
* **확장 사용자**: TRPG 게임 마스터(GM) 및 플레이어, 웹툰 작가, 게임 캐릭터 기획자

---

## 4. 목표 및 성공 지표 (Goals & Success Metrics)

### 제품 목표

* **창작 과정 간소화**: AI와의 대화를 통해 캐릭터 구상에 필요한 시간과 노력을 획기적으로 줄인다.
* **캐릭터 품질 향상**: 체계적인 질문과 AI의 도움으로 깊이 있고 입체적인 캐릭터 설정을 유도한다.
* **중앙화된 관리**: 사용자가 생성한 모든 캐릭터를 클라우드에 안전하게 저장하고 언제 어디서든 접근할 수 있는 환경을 제공한다.

### 핵심 성공 지표 (KPIs)

* **활성화 (Activation)**: 가입 후 3일 이내에 첫 캐릭터를 성공적으로 생성한 사용자 비율
* **참여 (Engagement)**: 사용자당 월평균 생성 캐릭터 수, 연계 캐릭터 생성 기능 사용률
* **리텐션 (Retention)**: 1개월 차 사용자 재방문율 (Month-1 Retention)
* **핵심 과업 성공률**: 채팅 시작부터 AI 프로필 생성 완료까지의 전환율

---

## 5. 기술 스택 및 아키텍처 (Tech Stack & Architecture)

본 프로젝트는 최신 기술 스택을 활용하여 개발 효율성과 서비스 안정성을 모두 확보한다.

* **프론트엔드 (Client)**: Flutter
* **상태 관리 (State Management)**: Riverpod (Provider를 활용한 선언적이고 반응적인 상태 관리)
* **백엔드 (Backend as a Service)**: Supabase
    * **인증 (Authentication)**: 소셜 로그인 (Google & Apple OAuth). 이메일/비밀번호 방식은 초기 MVP에서 제외하여 사용자 가입 허들을 낮춘다.
    * **데이터베이스 (Database)**: Supabase Postgres DB (사용자 정보, 캐릭터 데이터, 캐릭터 관계 정보 저장)
    * **서버리스 함수 (Serverless Functions)**: Supabase Edge Functions (OpenAI API 호출 로직 처리)
* **AI API**: OpenAI API (GPT-4o 또는 최신 모델)
* **서비스 환경**: 온라인 전용. 핵심 기능인 AI API 호출을 위해, 본 앱은 인터넷 연결이 필수적이며 온라인 상태에서만 정상적으로 동작한다.

---

## 6. 제품 기능 명세 (Feature Specifications)

### Epic 1: 사용자 인증 (소셜 로그인) - (수정됨)

* **기능**: 사용자는 구글 또는 애플 계정을 통해 간편하게 로그인하여 서비스를 이용할 수 있다.
* **User Stories**:
    * 1.1 신규 또는 기존 사용자는 'Google로 계속하기' 버튼을 통해 본인의 구글 계정으로 로그인할 수 있다.
    * 1.2 신규 또는 기존 사용자는 'Apple로 계속하기' 버튼을 통해 본인의 애플 계정으로 로그인할 수 있다.
    * 1.3 앱을 재시작해도 로그인 상태가 유지되어야 한다.

### Epic 2: 대화형 캐릭터 생성 (MVP)

* **기능**: 사용자는 AI 챗봇과의 문답을 통해 캐릭터의 핵심 정보를 입력한다.
* **User Stories**:
    * 2.1 사용자는 '새 캐릭터 만들기' 버튼을 눌러 채팅 세션을 시작할 수 있다.
    * 2.2 챗봇은 이름, 나이, 성격 키워드, 외모 특징, 배경 사건 등 구조화된 질문을 순차적으로 제시한다.
    * 2.3 사용자는 질문에 따라 자유 텍스트를 입력하거나, 제공되는 선택지 중에서 고를 수 있다.
    * 2.4 모든 질문에 답한 후, '프로필 생성하기' 버튼을 눌러 AI에게 최종 결과물 생성을 요청할 수 있다.

### Epic 3: AI 기반 프로필 생성 (MVP)

* **기능**: Edge Function을 통해 사용자의 입력을 OpenAI API로 전달하고, 완성된 캐릭터 프로필을 받아온다.
* **User Stories**:
    * 3.1 '프로필 생성하기'를 누르면, 앱은 수집된 모든 답변을 종합하여 Supabase Edge Function을 호출한다.
    * 3.2 Edge Function은 전달받은 데이터를 바탕으로 상세한 프롬프트를 구성하여 OpenAI API를 호출한다.
    * 3.3 사용자는 로딩 인디케이터를 통해 AI가 프로필을 생성 중임을 인지할 수 있다.
    * 3.4 생성이 완료되면, 서술형으로 작성된 상세 캐릭터 프로필을 앱 화면에서 확인할 수 있다.

### Epic 4: 캐릭터 저장 및 관리 (MVP)

* **기능**: 생성된 캐릭터 프로필을 사용자의 계정에 귀속하여 저장하고 관리한다.
* **User Stories**:
    * 4.1 AI가 생성한 모든 캐릭터 프로필은 자동으로 사용자의 계정에 연동되어 Supabase DB에 저장된다.
    * 4.2 홈 화면에서는 내가 만든 캐릭터들의 목록을 볼 수 있다.
    * 4.3 목록에서 특정 캐릭터를 선택하면 저장된 상세 프로필 페이지로 이동한다.
    * 4.4 사용자는 더 이상 필요 없는 캐릭터를 목록에서 삭제할 수 있다.
    * 4.5 캐릭터 상세 정보 페이지에서 해당 캐릭터와 관계가 있는 다른 캐릭터 목록을 확인하고 바로 이동할 수 있다.

### Epic 5: 연계 캐릭터 생성 (신규)

* **기능**: 사용자는 기존에 만든 캐릭터를 기반으로, 그와 특정 관계를 맺고 있는 새로운 캐릭터를 생성할 수 있다.
* **User Stories**:
    * 5.1 캐릭터 상세 페이지에서 '연계 캐릭터 생성하기' 버튼을 찾을 수 있다.
    * 5.2 버튼을 누르면, 생성할 캐릭터와 기존 캐릭터의 관계(예: 라이벌, 동생, 스승, 친구 등)를 정의하는 화면이 나타난다.
    * 5.3 관계를 정의한 후, AI는 기존 캐릭터 정보를 바탕으로 새로운 연계 캐릭터에 대한 추천 키워드나 질문을 제시하며 생성 과정을 돕는다.
    * 5.4 최종적으로 AI는 두 캐릭터의 관계성과 서사를 고려하여, 맥락에 맞는 새로운 연계 캐릭터의 프로필을 생성한다.

---

## 7. MVP 범위에서 제외되는 사항 (Out of Scope for MVP)

* 이메일/비밀번호 기반 회원가입 및 로그인
* AI 캐릭터 이미지 생성 (DALL-E 등 연동)
* 생성된 프로필 수정 및 버전 관리 기능
* 캐릭터 프로필 외부 공유 및 내보내기 (PDF, Text)
* 오프라인 모드 지원 (온라인 전용 서비스)

